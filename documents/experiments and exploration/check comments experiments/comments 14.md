```json
{
  "fileContent": "import React, { useState } from \"react\";\r\nimport { githubSearchCodeApi, octokit } from \"../api/apiconfigs\";\r\nimport { useGithubContext } from \"../context/useGithubContext\";\r\nimport { generateContent } from \"../geminiAPI/geminiAPI\";\r\nimport Markdown from \"react-markdown\";\r\nimport { components } from \"@octokit/openapi-types\";\r\n\r\nconst CodeSearch = () => {\r\n  const {\r\n    username,\r\n    repository,\r\n    selectedItems,\r\n    setSelectedItems,\r\n    query,\r\n    setQuery,\r\n    fileTypes,\r\n    setFileTypes,\r\n    results,\r\n    setResults,\r\n    resultsFromRepo,\r\n    setResultsFromRepo,\r\n    descriptions,\r\n    setDescriptions,\r\n    geminiApiKey,\r\n  } = useGithubContext();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [loadingDescriptions, setLoadingDescriptions] = useState({});\r\n  const [selectAll, setSelectAll] = useState(\r\n    selectedItems.length >= results.length\r\n  );\r\n\r\n  type SearchCodeResult = {\r\n    total_count: number;\r\n    incomplete_results: boolean;\r\n    items: components[\"schemas\"][\"code-search-result-item\"][];\r\n  };\r\n\r\n  function parseData(data: SearchCodeResult) {\r\n    // If the data is an array, return that\r\n    if (Array.isArray(data)) {\r\n      return data;\r\n    }\r\n\r\n    // Some endpoints respond with 204 No Content instead of empty array\r\n    //   when there is no data. In that case, return an empty array.\r\n    if (!data) {\r\n      return [];\r\n    }\r\n\r\n    // Pull out the array of items\r\n    return data.items;\r\n  }\r\n\r\n  const handleSearch = async () => {\r\n    setResultsFromRepo(\"\");\r\n    setResults([]);\r\n    setSelectedItems([]); // Initialize as an empty array for multiple selections\r\n    // better to keep the descriptions when a new search is made since api calls are expensive\r\n    // and can use the descriptions from the previous search if sha is same\r\n    // setDescriptions({});\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      var languageFilter = \"\";\r\n      fileTypes.split(\",\").forEach((type) => {\r\n        if (type.trim() !== \"\") {\r\n          languageFilter += `+language:${type}`;\r\n        }\r\n      });\r\n      var userFilter = \"\";\r\n\r\n      var nameWithRepo = \"\";\r\n      if (repository && username) {\r\n        nameWithRepo = `+repo:${username}/${repository}`;\r\n      } else if (username) {\r\n        userFilter = `+user:${username}`;\r\n      }\r\n\r\n      const nextPattern = /(?<=<)([\S]*)(?=>; rel=\"Next\")/i;\r\n      let pagesRemaining = true;\r\n      let data: any[] = [];\r\n      const queryString = `${query}${languageFilter}${userFilter}${nameWithRepo}`;\r\n\r\n      const perpage = 100;\r\n      let response = await octokit.request(\"GET /search/code\", {\r\n        q: queryString,\r\n        per_page: perpage,\r\n      });\r\n      pagesRemaining = response.data.total_count > perpage;\r\n      let parsedData = parseData(response.data);\r\n      data = [...data, ...parsedData];\r\n\r\n      let linkHeader = response.headers.link;\r\n      while (pagesRemaining) {\r\n        let url = linkHeader.match(nextPattern)[0] || null;\r\n\r\n        if (!url) {\r\n          console.log(\r\n            \"No next url detected in the link header. Stopping pagination.\"\r\n          );\r\n          break;\r\n        }\r\n\r\n        const response = await octokit.request(`GET ${url}`, {\r\n          per_page: perpage,\r\n        });\r\n        linkHeader = response.headers.link;\r\n\r\n        const parsedData = parseData(response.data);\r\n        data = [...data, ...parsedData];\r\n\r\n        pagesRemaining =\r\n          (linkHeader && linkHeader.includes(`rel=\\\"next\\\"`)) || false;\r\n      }\r\n\r\n      setResultsFromRepo(repository);\r\n      setResults(data);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const describeCode = async (item) => {\r\n    setLoadingDescriptions((prev) => ({ ...prev, [item.sha]: true }));\r\n    try {\r\n      const getCodeResponse = await octokit.request(\r\n        \"GET /repos/{owner}/{repo}/contents/{path}\",\r\n        {\r\n          owner: item.repository.owner.login,\r\n          repo: item.repository.name,\r\n          path: item.path,\r\n        }\r\n      );\r\n      console.log(atob(getCodeResponse.data.content));\r\n      if (getCodeResponse.data.content === \"\") {\r\n        console.log(\"code api response is empty\");\r\n        return;\r\n      }\r\n\r\n      var desc = query ? query : \"all code in the repository\";\r\n      const description = await generateContent(\r\n        geminiApiKey,\r\n        `User searched for ${query} and wants a description of the code from the file ${\r\n          item.name\r\n        } - ${item.repository.full_name}\\n        Summarise what this code is doing in two to three sentences. ${atob(\r\n          getCodeResponse.data.content\r\n        )}`\r\n      );\r\n      setDescriptions((prev) => ({ ...prev, [item.sha]: description }));\r\n    } catch (error) {\r\n      console.error(\"Error fetching file content:\", error);\r\n    } finally {\r\n      setLoadingDescriptions((prev) => ({ ...prev, [item.sha]: false }));\r\n    }\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    setSelectAll((prev) => !prev);\r\n    if (!selectAll) {\r\n      setSelectedItems(results);\r\n    } else {\r\n      setSelectedItems([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 border-gray-500 border-2 rounded-lg flex-grow overflow-x-hidden overflow-y-auto\">\r\n      <div className=\"flex gap-4 items-center\">\r\n        <h2 className=\"text-2xl\">GitHub Code Search</h2>\r\n      </div>\r\n      <div className=\"flex gap-4 items-center\">\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"Enter code snippet...\"\r\n        />\r\n        <button onClick={handleSearch} disabled={loading}>\r\n          {loading ? \"Searching...\" : \"Search\"}\r\n        </button>\r\n        <input\r\n          type=\"text\"\r\n          value={fileTypes}\r\n          onChange={(e) => setFileTypes(e.target.value)}\r\n          placeholder=\"Filter by comma seperated file types...\"\r\n        />\r\n        {results.length > 0 && (\r\n          <h2>\r\n            {results.length} Results from {resultsFromRepo}\r\n          </h2>\r\n        )}\r\n      </div>\r\n\r\n      {error && <p style={{ color: \"red\" }}>Error: {error}</p>}\r\n\r\n      {results.length > 0 && (\r\n        <div className=\"flex flex-col gap-2 mt-2\">\r\n          <h2 className=\"text-xl\">Search Results</h2>\r\n          <p>\r\n            All Search Results will <span className=\"font-bold\">always</span> be\r\n            used as context for the AI features in the app\r\n          </p>\r\n          <p>\r\n            <span className=\"font-bold\">Only specific features </span> will take\r\n            into account any <span className=\"font-bold\">selected</span> files\r\n          </p>\r\n          <button\r\n            onClick={handleSelectAll}\r\n            className=\"w-fit !p-2 !bg-green-700\"\r\n          >\r\n            {selectAll ? \"Deselect All\" : \"Select All\"}\r\n          </button>\r\n          <ul className=\"border-gray-500 border-2 rounded-lg p-2\">\r\n            {results.map((item) => (\r\n              <li\r\n                key={item.sha}\r\n                className=\"flex flex-col gap-2 p-2 border-gray-200 border-2 rounded-lg\"\r\n              >\r\n                <div className=\"flex gap-4 items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id={`select-${item.sha}`}\r\n                    className=\"mr-2\"\r\n                    checked={selectedItems.some(\r\n                      (selected) => selected.sha === item.sha\r\n                    )}\r\n                    onChange={() => {\r\n                      setSelectedItems((prev) =>\r\n                        prev.some((selected) => selected.sha === item.sha)\r\n                          ? prev.filter((selected) => selected.sha !== item.sha)\r\n                          : [...prev, item]\r\n                      );\r\n                    }}\r\n                  />\r\n                  <label htmlFor={`select-${item.sha}`} className=\"flex-grow\">\r\n                    <a\r\n                      href={item.html_url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"!text-white hover:!underline\"\r\n                    >\r\n                      {item.name} - {item.repository.full_name}\r\n                    </a>\r\n                  </label>\r\n                  <button\r\n                    onClick={() => describeCode(item)}\r\n                    disabled={loadingDescriptions[item.sha]}\r\n                    className=\"relative\"\r\n                  >\r\n                    {loadingDescriptions[item.sha] ? \"Loading...\" : \"Describe\"}\r\n                  </button>\r\n                </div>\r\n                {descriptions[item.sha] && (\r\n                  <div className=\"p-2\">\r\n                    <Markdown>{descriptions[item.sha]}</Markdown>\r\n                  </div>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CodeSearch;\r\n",
  "explain": "No changes needed. The code is already well-documented and the comments are accurate."
}
```
```json
{
  "fileContent": "import React, { useState } from \"react\";\r\nimport { useGithubContext } from \"../context/useGithubContext\";\r\nimport {\r\n  GEMINI_API_KEY,\r\n  GITHUB_TOKEN,\r\n  githubSearchRepoApi,\r\n  setOctokit,\r\n} from \"../api/apiconfigs\";\r\n\r\nconst GeneralInfo: React.FC = () => {\r\n  const {\r\n    username,\r\n    setUsername,\r\n    repository,\r\n    setRepository,\r\n    token,\r\n    setToken,\r\n    repos,\r\n    setRepos,\r\n    geminiApiKey,\r\n    setGeminiApiKey,\r\n  } = useGithubContext();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Function to fetch the repositories of a github user\r\n  const fetchRepos = async () => {\r\n    if (username) {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const response = await githubSearchRepoApi.get(\r\n          githubSearchRepoApi.defaults.baseURL + `?q=user:${username}`,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          }\r\n        );\r\n\r\n        if (!response) {\r\n          throw new Error(\"Failed to fetch repositories\");\r\n        } else {\r\n          const repoNames = response.data.items.map((item: any) => item.name);\r\n          setRepos(repoNames);\r\n        }\r\n      } catch (error) {\r\n        setError(\r\n          \"An error occurred while fetching repositories. Are you sure the username and token is valid?\"\r\n        );\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      setError(\"Please enter a GitHub username.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 border-gray-500 border-2 rounded-lg flex-grow\">\r\n      <div className=\"flex gap-4 items-center w-full\">\r\n        <h2 className=\"text-2xl\">General Information</h2>\r\n      </div>\r\n      <div className=\"flex flex-col gap-4 mt-4\">\r\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\r\n          <label className=\"flex gap-2 text-lg items-center\">\r\n            Gemini API Key:\r\n            <input\r\n              type=\"text\"\r\n              value={geminiApiKey}\r\n              onChange={(e) => setGeminiApiKey(e.target.value)}\r\n            />\r\n            {GEMINI_API_KEY && (\r\n              <span className=\"text-red-500\">\r\n                {\" \"}\r\n                (Gemini API Key detected in env, please ensure that this is\r\n                local development only)\r\n              </span>\r\n            )}\r\n          </label>\r\n          <p>\r\n            This is used to generate code descriptions and summaries. You can\r\n            get a free API key from google gemini.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\r\n          <label className=\"flex gap-2 text-lg items-center\">\r\n            GitHub Token:\r\n            <input\r\n              type=\"text\"\r\n              value={token}\r\n              onChange={(e) => {\r\n                setToken(e.target.value);\r\n                setOctokit(e.target.value);\r\n              }}\r\n            />\r\n            {GITHUB_TOKEN && (\r\n              <span className=\"text-red-500\">\r\n                {\" \"}\r\n                (Github token detected in env, please ensure that this is local\r\n                development only)\r\n              </span>\r\n            )}\r\n          </label>\r\n          <p>\r\n            This is used to list the repos that you own, search and retrieve\r\n            code in the repository. Optionally, also submit pull requests if you\r\n            use one of the features provided.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\r\n          <label className=\"flex gap-2 text-lg items-center\">\r\n            GitHub Username:\r\n            <input\r\n              type=\"text\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n          </label>\r\n          <p>\r\n            Enter your GitHub username to fetch repositories and interact with\r\n            the GitHub API.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\r\n          <label className=\"flex gap-2 text-lg items-center\">\r\n            Repository Name:\r\n            <button\r\n              onClick={fetchRepos}\r\n              disabled={loading}\r\n              className=\"bg-blue-500 text-white !p-1 rounded\"\r\n            >\r\n              {loading ? \"Fetching...\" : \"List Repos\"}\r\n            </button>\r\n          </label>\r\n          <p>\r\n            Select a repository from the list of repositories fetched using your\r\n            GitHub username.\r\n          </p>\r\n          {loading ? (\r\n            <span>Loading...</span>\r\n          ) : (\r\n            <select\r\n              value={repository}\r\n              onChange={(e) => {\r\n                const selectedRepo = e.target.value;\r\n                setRepository(selectedRepo); // Update context provider\r\n              }}\r\n            >\r\n              <option value=\"\" className=\"text-black\">\r\n                Select a repository\r\n              </option>\r\n              {repos.map((repo) => (\r\n                <option key={repo} value={repo} className=\"text-black\">\r\n                  {repo}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n          {error && <span className=\"text-lg text-red-500\">{error}</span>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GeneralInfo;\r\n",
  "explain": "No changes needed. The code is well-documented with accurate comments."
}
```