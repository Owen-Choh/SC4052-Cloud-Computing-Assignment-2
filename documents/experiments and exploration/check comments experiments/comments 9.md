[
  {
    "filePath": "github-search-saas/src/components/GeneralInfo.tsx",
    "fileContent": "/**\n * This React component provides a user interface for setting general information\n * such as GitHub username, repository name, GitHub token, and Gemini API key.\n * It also includes functionality to fetch repositories for a given GitHub username.\n */\nimport React, { useState } from \"react\";\nimport { useGithubContext } from \"../context/useGithubContext\";\nimport {\n  GEMINI_API_KEY,\n  GITHUB_TOKEN,\n  githubSearchRepoApi,\n  setOctokit,\n} from \"../api/apiconfigs\";\n\nconst GeneralInfo: React.FC = () => {\n  const {\n    username,\n    setUsername,\n    repository,\n    setRepository,\n    token,\n    setToken,\n    repos,\n    setRepos,\n    geminiApiKey,\n    setGeminiApiKey,\n  } = useGithubContext();\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  /**\n   * Fetches the repositories for the given GitHub username.\n   */\n  const fetchRepos = async () => {\n    if (username) {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response = await githubSearchRepoApi.get(\n          githubSearchRepoApi.defaults.baseURL + `?q=user:${username}`,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          }\n        );\n\n        if (!response) {\n          throw new Error(\"Failed to fetch repositories\");\n        } else {\n          const repoNames = response.data.items.map((item: any) => item.name);\n          setRepos(repoNames);\n        }\n      } catch (error) {\n        setError(\n          \"An error occurred while fetching repositories. Are you sure the username and token is valid?\"\n        );\n      } finally {\n        setLoading(false);\n      }\n    } else {\n      setError(\"Please enter a GitHub username.\");\n    }\n  };\n\n  return (\n    <div className=\"p-4 border-gray-500 border-2 rounded-lg flex-grow\">\n      <div className=\"flex gap-4 items-center w-full\">\n        <h2 className=\"text-2xl\">General Information</h2>\n      </div>\n      <div className=\"flex flex-col gap-4 mt-4\">\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\n          <label className=\"flex gap-2 text-lg items-center\">\n            Gemini API Key:\n            <input\n              type=\"text\"\n              value={geminiApiKey}\n              onChange={(e) => setGeminiApiKey(e.target.value)}\n            />\n            {GEMINI_API_KEY && (\n              <span className=\"text-red-500\">\n                {\" \"}\n                (Gemini API Key detected in env, please ensure that this is\n                local development only)\n              </span>\n            )}\n          </label>\n          <p>\n            This is used to generate code descriptions and summaries. You can\n            get a free API key from google gemini.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\n          <label className=\"flex gap-2 text-lg items-center\">\n            GitHub Token:\n            <input\n              type=\"text\"\n              value={token}\n              onChange={(e) => {\n                setToken(e.target.value);\n                setOctokit(e.target.value);\n              }}\n            />\n            {GITHUB_TOKEN && (\n              <span className=\"text-red-500\">\n                {\" \"}\n                (Github token detected in env, please ensure that this is local\n                development only)\n              </span>\n            )}\n          </label>\n          <p>\n            This is used to list the repos that you own, search and retrieve\n            code in the repository. Optionally, also submit pull requests if you\n            use one of the features provided.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\n          <label className=\"flex gap-2 text-lg items-center\">\n            GitHub Username:\n            <input\n              type=\"text\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n          </label>\n          <p>\n            Enter your GitHub username to fetch repositories and interact with\n            the GitHub API.\n          </p>\n        </div>\n        <div className=\"flex flex-col gap-2 border-2 border-gray-700 rounded-lg p-4\">\n          <label className=\"flex gap-2 text-lg items-center\">\n            Repository Name:\n            <button\n              onClick={fetchRepos}\n              disabled={loading}\n              className=\"bg-blue-500 text-white !p-1 rounded\"\n            >\n              {loading ? \"Fetching...\" : \"List Repos\"}\n            </button>\n          </label>\n          <p>\n            Select a repository from the list of repositories fetched using your\n            GitHub username.\n          </p>\n          {loading ? (\n            <span>Loading...</span>\n          ) : (\n            <select\n              value={repository}\n              onChange={(e) => {\n                const selectedRepo = e.target.value;\n                setRepository(selectedRepo); // Update context provider\n              }}\n            >\n              <option value=\"\" className=\"text-black\">\n                Select a repository\n              </option>\n              {repos.map((repo) => (\n                <option key={repo} value={repo} className=\"text-black\">\n                  {repo}\n                </option>\n              ))}\n            </select>\n          )}\n          {error && <span className=\"text-lg text-red-500\">{error}</span>}\n        </div>\n      </div>\n    </div>\n  );\n};\\\nexport default GeneralInfo;\n",
    "explain": "The code was updated to include comprehensive documentation. The following changes were made:\n\n- Added a component-level comment explaining the purpose of the `GeneralInfo` component.\n- Added a comment explaining the purpose of the `fetchRepos` function."
  }
]